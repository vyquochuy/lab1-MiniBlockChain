[run_all_test] Writing console output to logs\run_all_test_output.txt

================================================================================
BLOCKCHAIN LAYER 1 - COMPREHENSIVE TEST SUITE
================================================================================


================================================================================
Running test_crypto
================================================================================

================================================================================
RUNNING CRYPTOGRAPHY UNIT TESTS
================================================================================

TEST: KeyPair Generation

############################################################
CRYPTO DIAGNOSTICS: keypair_generation
############################################################
 public_key (base64): dsxX9Hj6O8iMojOn3yr4PctkfzTFNJUmK2LSkjbgfYo=
 public_key_len: 32 bytes
 address: dsxX9Hj6O8iMojOn3yr4PctkfzTFNJUmK2LSkjbgfYo=
PASSED: KeyPair generation works correctly

TEST: Signature Verification

############################################################
CRYPTO DIAGNOSTICS: signature_verification
############################################################
 public_key (base64): YxdyqDZKQ+JTYpR3dxIwZ6nJGNa2W2KO2hSRkLpzhWg=
 public_key_len: 32 bytes
 address: YxdyqDZKQ+JTYpR3dxIwZ6nJGNa2W2KO2hSRkLpzhWg=
 signature (base64): VTe3ONZ+yj5PcE6/rWZWuv2jcrYhYW3ICtEIPhm2YXXT+jIRdfhWd5JbgShFKQjU0SCcnscLy8qVYv9mE+cjBw==
 signature_len: 64 bytes
 verified_correct: False
PASSED: Signature verification works correctly

TEST: Domain Separation

############################################################
CRYPTO DIAGNOSTICS: domain_separation
############################################################
 public_key (base64): 8i5253zeJFMbmBOugEHI0c4PlAikWinnO/bOrzyvI/A=
 public_key_len: 32 bytes
 address: 8i5253zeJFMbmBOugEHI0c4PlAikWinnO/bOrzyvI/A=
 tx_signature: b'\x96\x8b\xe9\xf2\xb8\xaa(\x0c\x8c\x8b\x89\xca\xf0`\xde:(\xc8\xf0e(\xc6{\x8e\xc2\x167\xdb\x11\x9b\xf2bc\xb0\xc1\x1b\xb3\x15j\xe6\x9e\xfc;\xbd<\xab\x02v\xeaP\xa5\x9a\xca=\xda\x84\x94\xa3\xfb\xac\xc7\x03\xf9\x02'
 vote_signature: b'\x1c\xfa\xaew\xcf\xc7\xff\xa0\xc7\x01\x16\xe2\x1b,u\x01\x80v\x9c\xe3"\xcet\xde\xfa\x8a\xa7F\x02\xa8J*\x01v\x95\x9d\x8fu\xe5\xab\xdf;_\x1f\xed\x82\xdb\xce(\x1d#2Pli/\x9c\x91E6TK\x04\x01'
 tx_sig_b64: lovp8riqKAyMi4nK8GDeOijI8GUoxnuOwhY32xGb8mJjsMEbsxVq5p78O708qwJ26lClmso92oSUo/usxwP5Ag==
 vote_sig_b64: HPqud8/H/6DHARbiGyx1AYB2nOMiznTe+oqnRgKoSioBdpWdj3Xlq987Xx/tgtvOKB0jMlBsaS+ckUU2VEsEAQ==
 tx_verified: True
 vote_verified: True
PASSED: Domain separation prevents signature reuse

TEST: Deterministic Hashing

############################################################
CRYPTO DIAGNOSTICS: deterministic_hashing
############################################################
 hash1: 7ecf5410de0ed9f632d3dd406555686ad4c8f11d83f97006f0b63b73eb7aa5a2
 hash4: 7ecf5410de0ed9f632d3dd406555686ad4c8f11d83f97006f0b63b73eb7aa5a2
 hash5: 8042defe51d8788dc33f27390dfd46dd3fa6880315ca3dc64c308d50e3e85cdb
PASSED: Hashing is deterministic and collision-resistant

TEST: Chain ID Separation
PASSED: Chain ID separation prevents cross-chain replay

TEST: Message Serialization

############################################################
CRYPTO DIAGNOSTICS: serialization
############################################################
 public_key (base64): lb4KAQvIX1Qw9OSwK2cB+zKc5cREHN+LCWhPb0xZ5yE=
 public_key_len: 32 bytes
 address: lb4KAQvIX1Qw9OSwK2cB+zKc5cREHN+LCWhPb0xZ5yE=
 signature (base64): 38l1OhAv/t3YIGUeHoOm4nJ8zmzOdKrGn/kWjqiIIYpTxG6y3C5bcg16NFQ6jGiljpUzlFZlYHnC0Ak8DBiiDg==
 signature_len: 64 bytes
 signature_b64 (provided): 38l1OhAv/t3YIGUeHoOm4nJ8zmzOdKrGn/kWjqiIIYpTxG6y3C5bcg16NFQ6jGiljpUzlFZlYHnC0Ak8DBiiDg==
 dict keys: ['domain', 'chain_id', 'data', 'signature', 'signer_address']
  domain: TX
  chain_id: test-chain
  data: {'key': 'value', 'number': 123}
  signature: 38l1OhAv/t3YIGUeHoOm4nJ8zmzOdKrGn/kWjqiIIYpTxG6y3C5bcg16NFQ6jGiljpUzlFZlYHnC0Ak8DBiiDg==
  signer_address: lb4KAQvIX1Qw9OSwK2cB+zKc5cREHN+LCWhPb0xZ5yE=
PASSED: Message serialization preserves integrity

TEST: Tamper Detection

############################################################
CRYPTO DIAGNOSTICS: tamper_detection
############################################################
 public_key (base64): jjjANMqjz0q2IQRFevxjnA5+36ELUEFU2/tjRn3RahU=
 public_key_len: 32 bytes
 address: jjjANMqjz0q2IQRFevxjnA5+36ELUEFU2/tjRn3RahU=
 original_signature: b'\x9f1}\xc3\xe8\x1b\x9a\x86\xe9J\xc3\x12\xaej\x05Z\xdd\xb2^)e\xe5\xe0\xbb4o\x041\xfa\x9c2\x88\xb9\xb19\xc8t\xde\xaeH\xcaUUC\xb7\xf24\xd2\xf3\x95\x9d\xb6\x02\xa5\xdc\x96m\xb45g$"\x1f\t'
 tampered_signature: b'\x9f1}\xc3\xe8\x1b\x9a\x86\xe9J\xc3\x12\xaej\x05Z\xdd\xb2^)e\xe5\xe0\xbb4o\x041\xfa\x9c2\x88\xb9\xb19\xc8t\xde\xaeH\xcaUUC\xb7\xf24\xd2\xf3\x95\x9d\xb6\x02\xa5\xdc\x96m\xb45g$"\x1f\t'
 original_sig_b64: nzF9w+gbmobpSsMSrmoFWt2yXill5eC7NG8EMfqcMoi5sTnIdN6uSMpVVUO38jTS85WdtgKl3JZttDVnJCIfCQ==
PASSED: Data tampering is detected

================================================================================
CRYPTOGRAPHY TEST SUMMARY
================================================================================
PASSED: test_keypair_generation
PASSED: test_signature_verification
PASSED: test_domain_separation
PASSED: test_deterministic_hashing
PASSED: test_chain_id_separation
PASSED: test_serialization
PASSED: test_tamper_detection

ALL CRYPTOGRAPHY TESTS PASSED!

================================================================================
Running test_execution
================================================================================

================================================================================
RUNNING EXECUTION UNIT TESTS
================================================================================

TEST: State Operations

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
EXECUTION DIAGNOSTICS: state_operations
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 state_hash: 9874854240b45b4bdbf43fca6110bafce8525aedbeca5babaee0cb137d9a7868
 balances: {}

PASSED: State operations work correctly

TEST: Balance Operations

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
EXECUTION DIAGNOSTICS: balance_operations
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 state_hash: df8926f6597821e4cc615f60afd620cb3f2a102fa6a01261028a018958795e35
 balances: {'alice': 700, 'bob': 800}

PASSED: Balance operations work correctly

TEST: State Hash Determinism

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
EXECUTION DIAGNOSTICS: state_hash_determinism
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 state_hash: 347363fca0763b956b4b8ef20bfc758a9af6ec85d348db871879924016dc7e70
 balances: {'alice': 1000, 'bob': 2000}

PASSED: State hashing is deterministic

TEST: Transaction Creation

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
EXECUTION DIAGNOSTICS: transaction_creation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 transactions_count: 1

PASSED: Transaction creation works correctly

TEST: Transaction Nonce (Replay Protection)

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
EXECUTION DIAGNOSTICS: transaction_nonce
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 state_hash: 008f1fa31a92a337e8a42bb85b320b633c976fff4c3b12f4e21b672659cae084
 balances: {'DUi7AGSnJMzBd/ABrrllwwNPOR1FonGD2g+wjJ3U9pQ=': 800, 'recipient': 200}
 processed_nonces: {'DUi7AGSnJMzBd/ABrrllwwNPOR1FonGD2g+wjJ3U9pQ=': 2}

PASSED: Nonce prevents replay attacks

TEST: Transaction Signature Validation

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
EXECUTION DIAGNOSTICS: transaction_signature_validation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

PASSED: Invalid signatures are rejected

TEST: Executor Determinism

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
EXECUTION DIAGNOSTICS: executor_determinism
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 state_hash: 78b8c2d727e2f5f27db9642aa28ef0735770efdaf3a59982c3e398a0fca5cf9e
 balances: {'PNP70io0Z4gdMeTYUTpVdJa7aVP6Amq71wQpZm2FeRE=': 850, 'recipient_0': 10, 'recipient_1': 20, 'recipient_2': 30, 'recipient_3': 40, 'recipient_4': 50}
 processed_nonces: {'PNP70io0Z4gdMeTYUTpVdJa7aVP6Amq71wQpZm2FeRE=': 5}
 transactions_count: 5
 executed: ['8e3fa74ba89913f334fac39c69d5a28e9732c02d8065ab0a6d53a523210b9b60', '2fb8c0cf5fe461f26dfaac328f5d9ef123da09933cb5e1ea394462dadb403aea', '50c4fb2fc4b1b1e533f5db1f5cdddc28c4bae87ebb6a3c649a9471f723d4ed24', '5c31c96f5aa2f47a05b2226e3fd9409f93abba1b4052f03100d933f999c9398f', 'a048849f526f2a8e8bfa3aa795c29ea3917f405072481affa8596ee82ee25810']

PASSED: Executor is deterministic

TEST: Insufficient Balance Check

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
EXECUTION DIAGNOSTICS: insufficient_balance
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 state_hash: 4833dfe289480af12696485a8dde26e05d51c8e793f33ae1080df29ff1198460
 balances: {'7jTvQhbxsWW/5J0Y98nqA1XAC4JkK9Iz+dQ9hWKwl3A=': 50}
 processed_nonces: {}
 last_error: Insufficient balance. Has 50, needs 100

PASSED: Insufficient balance is checked

TEST: State Isolation

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
EXECUTION DIAGNOSTICS: state_isolation_original
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 state_hash: 14080b5311a1c622d7f39681bf75f90b6739d29f08d48f160b4fb8ae561cc3fd
 balances: {'alice': 1000}


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
EXECUTION DIAGNOSTICS: state_isolation_copy
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 state_hash: 7cbfc0c598b5b573608d18c23548d74007d38b837a3c4adf3127844458ee1437
 balances: {'alice': 2000, 'bob': 500}

PASSED: State copies are isolated

TEST: Transaction Ordering

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
EXECUTION DIAGNOSTICS: transaction_ordering
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 state_hash: b1518d966b50eb0430f9ea73a2859f3372b0a6e22ad60d9b9d7e1e34735954f5
 balances: {'IEfPHD4bWlhSUBfA9Fp0hBOpzppT5meH6buiW8vabd8=': 200, '8UnXAsoCsnY0HIF3ejbMbCa6PzC2iGGq9+//YMWxUtI=': 800}
 processed_nonces: {'IEfPHD4bWlhSUBfA9Fp0hBOpzppT5meH6buiW8vabd8=': 2}
 executed: ['43c05cf841e0ea17d110a2ffbaffc3b77cbca18a0aa5bc92e8940b2e51b7cf0c', '6da29125f481017a15c7f47f77ec1561ec6466b557c21a2939cfb4998092cd84']

PASSED: Transaction ordering is respected

================================================================================
EXECUTION TEST SUMMARY
================================================================================
PASSED: test_state_operations
PASSED: test_balance_operations
PASSED: test_state_hash_determinism
PASSED: test_transaction_creation
PASSED: test_transaction_nonce
PASSED: test_transaction_signature_validation
PASSED: test_executor_determinism
PASSED: test_insufficient_balance
PASSED: test_state_isolation
PASSED: test_transaction_ordering

ALL EXECUTION TESTS PASSED!

================================================================================
Running test_consensus
================================================================================

================================================================================
RUNNING CONSENSUS UNIT TESTS
================================================================================

TEST: Vote Creation and Verification
PASSED: Vote creation and verification works

TEST: Vote Collector

================================================================================
CONSENSUS DIAGNOSTICS: after_adding_prevotes
================================================================================
 total_validators: 4
 prevotes:
   height=1, block=abc123..., voters=3 -> ['18nrzw/5cpfhcXaW5C8V2HfOxbehOCHrXOUse6NPHLI=', '6jikerfsk2uqFkV7BKeOSJDscD2Y6+ZY+0qHQnqphNA=', 'aNJmHZtRHozDSIJoTIpbRrpYN8Swu7pHQUBnixcZgBs=']
 precommits:
 height=1: prevotes={'abc123': 3}, precommits={}

PASSED: Vote collector tracks majorities correctly

TEST: Duplicate Vote Rejection
PASSED: Duplicate votes are rejected

TEST: Block Header Hash Consistency
PASSED: Block header hashing is consistent

TEST: Block Serialization
PASSED: Block serialization preserves data

TEST: Genesis Block Creation
PASSED: Genesis block created correctly

TEST: Two-Phase Voting Process

================================================================================
CONSENSUS DIAGNOSTICS: after_prevotes_two_phase
================================================================================
 total_validators: 4
 prevotes:
   height=1, block=block123..., voters=3 -> ['g8biRcvy/f/M52ikuLjSs2amDXbCqxOfoNSuGFvAgV4=', 'ho10iqQ87dEyRdeDQt34q08HI5CB0KCvAQXVoXHWDRg=', 'IRZ4QLbcFRmKPoAYrJVi44aD7rFGR86e+KoKOUraznE=']
 precommits:
 height=1: prevotes={'block123': 3}, precommits={}


================================================================================
CONSENSUS DIAGNOSTICS: after_precommits_two_phase
================================================================================
 total_validators: 4
 prevotes:
   height=1, block=block123..., voters=3 -> ['g8biRcvy/f/M52ikuLjSs2amDXbCqxOfoNSuGFvAgV4=', 'ho10iqQ87dEyRdeDQt34q08HI5CB0KCvAQXVoXHWDRg=', 'IRZ4QLbcFRmKPoAYrJVi44aD7rFGR86e+KoKOUraznE=']
 precommits:
   height=1, block=block123..., voters=3 -> ['g8biRcvy/f/M52ikuLjSs2amDXbCqxOfoNSuGFvAgV4=', 'ho10iqQ87dEyRdeDQt34q08HI5CB0KCvAQXVoXHWDRg=', 'IRZ4QLbcFRmKPoAYrJVi44aD7rFGR86e+KoKOUraznE=']
 height=1: prevotes={'block123': 3}, precommits={'block123': 3}

PASSED: Two-phase voting process works correctly

TEST: Conflicting Votes

================================================================================
CONSENSUS DIAGNOSTICS: after_conflicting_votes
================================================================================
 total_validators: 3
 prevotes:
   height=1, block=block1..., voters=1 -> ['lFrRgp1Nha9LeQTay/PYwJuGa+irjMt6mpcpJB8LvhI=']
   height=1, block=block2..., voters=1 -> ['lFrRgp1Nha9LeQTay/PYwJuGa+irjMt6mpcpJB8LvhI=']
 precommits:
 height=1: prevotes={'block1': 1, 'block2': 1}, precommits={}

PASSED: Conflicting votes are tracked separately

TEST: ConsensusEngine Diagnostics

================================================================================
CONSENSUS DIAGNOSTICS: engine_after_receive_proposal
================================================================================
 total_validators: 4
 prevotes:
   height=1, block=5a9a9ebc..., voters=1 -> ['gX1p3FfnK78XlDwBegm+yo+5t4+W62IeUK1fYfFgM7s=']
 precommits:
 height=1: prevotes={'5a9a9ebcc04311ba9361b326954af5438278c0eec53ff4f8b1762333301994b3': 1}, precommits={}


================================================================================
CONSENSUS DIAGNOSTICS: engine_after_external_prevotes
================================================================================
 total_validators: 4
 prevotes:
   height=1, block=5a9a9ebc..., voters=3 -> ['gX1p3FfnK78XlDwBegm+yo+5t4+W62IeUK1fYfFgM7s=', 'rMv2of63Kmo2dwQYYJNWjGdwmOE3ddf9SNvIf00KAQE=', 'q6iG3vfcO9ADDEELjQHQIodMWPdkBNe9QeZUJNg4d50=']
 precommits:
   height=1, block=5a9a9ebc..., voters=1 -> ['gX1p3FfnK78XlDwBegm+yo+5t4+W62IeUK1fYfFgM7s=']
 height=1: prevotes={'5a9a9ebcc04311ba9361b326954af5438278c0eec53ff4f8b1762333301994b3': 3}, precommits={'5a9a9ebcc04311ba9361b326954af5438278c0eec53ff4f8b1762333301994b3': 1}

PASSED: ConsensusEngine diagnostics

================================================================================
CONSENSUS TEST SUMMARY
================================================================================
PASSED: test_vote_creation_and_verification
PASSED: test_vote_collector
PASSED: test_duplicate_vote_rejection
PASSED: test_block_header_hash
PASSED: test_block_serialization
PASSED: test_genesis_block_creation
PASSED: test_two_phase_voting
PASSED: test_conflicting_votes
PASSED: test_consensus_engine_diagnostics

ALL CONSENSUS TESTS PASSED!

================================================================================
Running test_network
================================================================================

================================================================================
RUNNING NETWORK UNIT TESTS
================================================================================

TEST: Basic Message Delivery
PASSED: Messages are delivered correctly

TEST: Message Delays
PASSED: Messages are properly delayed

TEST: Packet Loss
--- NETWORK CONFIG ---
  loss_rate: 0.5
  delay_range: (0.001, 0.01)
  duplicate_rate: 0.0
  enable_delays: False
  num_messages: 100
--- NETWORK STATS ---
  delivered: 0
  dropped: 55
  duplicated: 0
  pending: 45
  in_inboxes: 0
  simulation_time: 0.0
  blocked_peers: 0
  rate_limited_drops: 0
  rate_limit_drops: 0
  Calculated loss rate: 55.00% (expected ~50%)
PASSED: Packet loss rate: 55.00%

TEST: Message Duplicates
PASSED: Message duplication works

TEST: Message Broadcasting
PASSED: Broadcasting works correctly

TEST: Message Reordering
   Messages were reordered: [8, 6, 5, 0, 4]...
PASSED: Message reordering can occur

TEST: Network Statistics
--- NETWORK CONFIG ---
  delay_range: (0.001, 0.01)
  loss_rate: 0.2
  duplicate_rate: 0.1
  enable_delays: False
  num_messages: 50
--- NETWORK STATS ---
  delivered: 48
  dropped: 8
  duplicated: 6
  pending: 0
  in_inboxes: 0
  simulation_time: 0.02
  blocked_peers: 0
  rate_limited_drops: 0
  rate_limit_drops: 0
PASSED: Network statistics tracked correctly

TEST: Zero Delay Mode
PASSED: Zero-delay mode works for testing

TEST: Rate Limiting - Blocking Excessive Senders
   Dropped 50 messages due to rate limit
   Alice blocked: {'alice'}
PASSED: Rate limiting blocks excessive senders

TEST: Rate Limiting - Peer Unblocking After Timeout
   Alice was blocked until time: 5.00
   Current simulation time: 6.01
PASSED: Blocked peers are unblocked after timeout

TEST: Rate Limiting - Per-Sender Enforcement
   Alice blocked: Yes
   Bob blocked: No
   Bob's messages delivered: 50/50
PASSED: Rate limiting is enforced per-sender

TEST: Rate Limiting - Statistics Tracking
--- NETWORK CONFIG ---
  delay_range: (0.001, 0.01)
  loss_rate: 0.0
  duplicate_rate: 0.0
  enable_delays: False
  num_messages: 150
--- NETWORK STATS ---
  delivered: 0
  dropped: 50
  duplicated: 0
  pending: 100
  in_inboxes: 0
  simulation_time: 0.0
  blocked_peers: 1
  rate_limited_drops: 50
  rate_limit_drops: 50
   Blocked peers: 1
   Rate limited drops: 50
   Total dropped: 50
PASSED: Rate limiting statistics tracked correctly

TEST: Header/Body Separation - Basic Functionality
--- TEST CONFIG ---
  chain_id: test-chain
  num_validators: 3
  tx_amount: 50
--- NODE[0] HEADER/BODY STATS ---
  pending_block_bodies: 1
  accepted_headers: 1
  requested_bodies: 0
   Leader has header/body separation structures
   Pending block bodies: 1
PASSED: Basic header/body separation structures exist

TEST: Header/Body Separation - Message Type Handling
   Node has _handle_block_header()
   Node has _handle_block_body_request()
   Node has _handle_block_body()
PASSED: Header/body message handlers exist

TEST: Header/Body Separation - Backward Compatibility
   Blocks finalized: 1
PASSED: Backward compatibility maintained

================================================================================
NETWORK TEST SUMMARY
================================================================================
PASSED: test_message_delivery
PASSED: test_message_delays
PASSED: test_packet_loss
PASSED: test_message_duplicates
PASSED: test_broadcast
PASSED: test_message_reordering
PASSED: test_network_stats
PASSED: test_zero_delay_mode
PASSED: test_rate_limiting
PASSED: test_rate_limit_peer_unblocking
PASSED: test_rate_limit_multiple_senders
PASSED: test_rate_limit_stats
PASSED: test_header_body_separation_basic
PASSED: test_header_body_message_types
PASSED: test_header_body_backward_compatibility

ALL NETWORK TESTS PASSED!
Total tests: 15
  - Original tests: 8
  - Rate limiting tests: 4
  - Header/Body tests: 3

================================================================================
Running test_e2e
================================================================================

================================================================================
RUNNING END-TO-END TESTS
================================================================================

================================================================================
TEST: Single Block Finalization
================================================================================

--------------------------------------------------------------------------------
DIAGNOSTICS: single_block_running @ tick=0
--------------------------------------------------------------------------------
Network stats:
  simulation_time: 0.01
  delivered: 3
  dropped: 0
  duplicated: 0
  pending (message_queue): 9
  in_inboxes: 0
  blocked_peers: 0
  rate_limited_drops: 0

Node states:
  Node[0] J6H1p+8t...: chain_len=1, height=1, tx_pool=0, last_block=08bf22550adccc8f, prevoted=1, precommitted=0
  Node[1] HvPcYlUl...: chain_len=1, height=1, tx_pool=1, last_block=08bf22550adccc8f, prevoted=0, precommitted=0
  Node[2] b7xTudth...: chain_len=1, height=1, tx_pool=1, last_block=08bf22550adccc8f, prevoted=0, precommitted=0
  Node[3] CJzftcZU...: chain_len=1, height=1, tx_pool=1, last_block=08bf22550adccc8f, prevoted=0, precommitted=0

--------------------------------------------------------------------------------
DIAGNOSTICS: single_block_running @ tick=20
--------------------------------------------------------------------------------
Network stats:
  simulation_time: 0.21000000000000005
  delivered: 55
  dropped: 0
  duplicated: 4
  pending (message_queue): 0
  in_inboxes: 0
  blocked_peers: 0
  rate_limited_drops: 0

Node states:
  Node[0] J6H1p+8t...: chain_len=2, height=2, tx_pool=0, last_block=fdc7aa988326d6de, prevoted=1, precommitted=1
  Node[1] HvPcYlUl...: chain_len=2, height=2, tx_pool=0, last_block=fdc7aa988326d6de, prevoted=1, precommitted=1
  Node[2] b7xTudth...: chain_len=2, height=2, tx_pool=1, last_block=fdc7aa988326d6de, prevoted=1, precommitted=1
  Node[3] CJzftcZU...: chain_len=2, height=2, tx_pool=1, last_block=fdc7aa988326d6de, prevoted=1, precommitted=1

--------------------------------------------------------------------------------
DIAGNOSTICS: single_block_running @ tick=40
--------------------------------------------------------------------------------
Network stats:
  simulation_time: 0.4100000000000002
  delivered: 55
  dropped: 0
  duplicated: 4
  pending (message_queue): 0
  in_inboxes: 0
  blocked_peers: 0
  rate_limited_drops: 0

Node states:
  Node[0] J6H1p+8t...: chain_len=2, height=2, tx_pool=0, last_block=fdc7aa988326d6de, prevoted=1, precommitted=1
  Node[1] HvPcYlUl...: chain_len=2, height=2, tx_pool=0, last_block=fdc7aa988326d6de, prevoted=1, precommitted=1
  Node[2] b7xTudth...: chain_len=2, height=2, tx_pool=1, last_block=fdc7aa988326d6de, prevoted=1, precommitted=1
  Node[3] CJzftcZU...: chain_len=2, height=2, tx_pool=1, last_block=fdc7aa988326d6de, prevoted=1, precommitted=1

--------------------------------------------------------------------------------
DIAGNOSTICS: single_block_running @ tick=60
--------------------------------------------------------------------------------
Network stats:
  simulation_time: 0.6100000000000003
  delivered: 55
  dropped: 0
  duplicated: 4
  pending (message_queue): 0
  in_inboxes: 0
  blocked_peers: 0
  rate_limited_drops: 0

Node states:
  Node[0] J6H1p+8t...: chain_len=2, height=2, tx_pool=0, last_block=fdc7aa988326d6de, prevoted=1, precommitted=1
  Node[1] HvPcYlUl...: chain_len=2, height=2, tx_pool=0, last_block=fdc7aa988326d6de, prevoted=1, precommitted=1
  Node[2] b7xTudth...: chain_len=2, height=2, tx_pool=1, last_block=fdc7aa988326d6de, prevoted=1, precommitted=1
  Node[3] CJzftcZU...: chain_len=2, height=2, tx_pool=1, last_block=fdc7aa988326d6de, prevoted=1, precommitted=1

--------------------------------------------------------------------------------
DIAGNOSTICS: single_block_running @ tick=80
--------------------------------------------------------------------------------
Network stats:
  simulation_time: 0.8100000000000005
  delivered: 55
  dropped: 0
  duplicated: 4
  pending (message_queue): 0
  in_inboxes: 0
  blocked_peers: 0
  rate_limited_drops: 0

Node states:
  Node[0] J6H1p+8t...: chain_len=2, height=2, tx_pool=0, last_block=fdc7aa988326d6de, prevoted=1, precommitted=1
  Node[1] HvPcYlUl...: chain_len=2, height=2, tx_pool=0, last_block=fdc7aa988326d6de, prevoted=1, precommitted=1
  Node[2] b7xTudth...: chain_len=2, height=2, tx_pool=1, last_block=fdc7aa988326d6de, prevoted=1, precommitted=1
  Node[3] CJzftcZU...: chain_len=2, height=2, tx_pool=1, last_block=fdc7aa988326d6de, prevoted=1, precommitted=1
PASSED: Single block finalized correctly

================================================================================
TEST: No Double Finalization (Safety)
================================================================================

--------------------------------------------------------------------------------
DIAGNOSTICS: no_double_finalization_running @ tick=0
--------------------------------------------------------------------------------
Network stats:
  simulation_time: 0.01
  delivered: 10
  dropped: 4
  duplicated: 0
  pending (message_queue): 7
  in_inboxes: 0
  blocked_peers: 0
  rate_limited_drops: 0

Node states:
  Node[0] kNjLbJd1...: chain_len=1, height=1, tx_pool=0, last_block=67450549ad19a4f6, prevoted=1, precommitted=0
  Node[1] ur2X7NLf...: chain_len=1, height=1, tx_pool=3, last_block=67450549ad19a4f6, prevoted=0, precommitted=0
  Node[2] tf3B8l23...: chain_len=1, height=1, tx_pool=3, last_block=67450549ad19a4f6, prevoted=0, precommitted=0
  Node[3] 0WsbT5tl...: chain_len=1, height=1, tx_pool=4, last_block=67450549ad19a4f6, prevoted=0, precommitted=0

--------------------------------------------------------------------------------
DIAGNOSTICS: no_double_finalization_running @ tick=50
--------------------------------------------------------------------------------
Network stats:
  simulation_time: 0.5100000000000002
  delivered: 52
  dropped: 7
  duplicated: 2
  pending (message_queue): 0
  in_inboxes: 0
  blocked_peers: 0
  rate_limited_drops: 0

Node states:
  Node[0] kNjLbJd1...: chain_len=2, height=2, tx_pool=0, last_block=f771ab5967637d3f, prevoted=1, precommitted=1
  Node[1] ur2X7NLf...: chain_len=2, height=2, tx_pool=0, last_block=f771ab5967637d3f, prevoted=1, precommitted=1
  Node[2] tf3B8l23...: chain_len=2, height=2, tx_pool=3, last_block=f771ab5967637d3f, prevoted=1, precommitted=1
  Node[3] 0WsbT5tl...: chain_len=2, height=2, tx_pool=4, last_block=f771ab5967637d3f, prevoted=1, precommitted=1

--------------------------------------------------------------------------------
DIAGNOSTICS: no_double_finalization_running @ tick=100
--------------------------------------------------------------------------------
Network stats:
  simulation_time: 1.0100000000000007
  delivered: 52
  dropped: 7
  duplicated: 2
  pending (message_queue): 0
  in_inboxes: 0
  blocked_peers: 0
  rate_limited_drops: 0

Node states:
  Node[0] kNjLbJd1...: chain_len=2, height=2, tx_pool=0, last_block=f771ab5967637d3f, prevoted=1, precommitted=1
  Node[1] ur2X7NLf...: chain_len=2, height=2, tx_pool=0, last_block=f771ab5967637d3f, prevoted=1, precommitted=1
  Node[2] tf3B8l23...: chain_len=2, height=2, tx_pool=3, last_block=f771ab5967637d3f, prevoted=1, precommitted=1
  Node[3] 0WsbT5tl...: chain_len=2, height=2, tx_pool=4, last_block=f771ab5967637d3f, prevoted=1, precommitted=1

--------------------------------------------------------------------------------
DIAGNOSTICS: no_double_finalization_running @ tick=150
--------------------------------------------------------------------------------
Network stats:
  simulation_time: 1.5100000000000011
  delivered: 52
  dropped: 7
  duplicated: 2
  pending (message_queue): 0
  in_inboxes: 0
  blocked_peers: 0
  rate_limited_drops: 0

Node states:
  Node[0] kNjLbJd1...: chain_len=2, height=2, tx_pool=0, last_block=f771ab5967637d3f, prevoted=1, precommitted=1
  Node[1] ur2X7NLf...: chain_len=2, height=2, tx_pool=0, last_block=f771ab5967637d3f, prevoted=1, precommitted=1
  Node[2] tf3B8l23...: chain_len=2, height=2, tx_pool=3, last_block=f771ab5967637d3f, prevoted=1, precommitted=1
  Node[3] 0WsbT5tl...: chain_len=2, height=2, tx_pool=4, last_block=f771ab5967637d3f, prevoted=1, precommitted=1
PASSED: No double finalization detected (Safety guaranteed)

================================================================================
TEST: Invalid Signature Rejection
================================================================================
PASSED: Invalid signatures rejected

================================================================================
TEST: Deterministic Replay
================================================================================
PASSED: Deterministic replay produces identical results

================================================================================
TEST SUMMARY
================================================================================
PASSED: test_single_block_finalization
PASSED: test_no_double_finalization
PASSED: test_invalid_signature_rejection
PASSED: test_deterministic_replay

ALL TESTS PASSED!

================================================================================
FINAL TEST REPORT
================================================================================

PASSED - test_crypto          (0.02s)
PASSED - test_execution       (0.01s)
PASSED - test_consensus       (0.03s)
PASSED - test_network         (0.04s)
PASSED - test_e2e             (0.11s)

================================================================================
Total Duration: 0.32s
================================================================================

ALL TEST SUITES PASSED!

Test report saved to logs/test_report.json

Text output saved to logs\run_all_test_output.txt
